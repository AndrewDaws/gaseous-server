<div id="gametitle">
    <h1 id="gametitle_label">Libraries</h1>
</div>

<div class="section">
    <div class="section-body">
        <table id="settings_libraries" class="romtable" style="width: 100%;" cellspacing="0">

        </table>
        <div style="text-align: right;"><button id="settings_newlibrary">New
                Library</button></div>
    </div>
</div>

<script type="text/javascript">
    function drawLibrary() {
        ajaxCall(
            '/api/v1.1/Library',
            'GET',
            function (result) {
                let newTable = document.getElementById('settings_libraries');
                newTable.innerHTML = '';
                newTable.appendChild(createTableRow(true, ['Name', 'Path', 'Default Platform', 'Default Library', '']));

                console.log(result);
                for (let i = 0; i < result.length; i++) {
                    let platformName = '';
                    if (result[i].defaultPlatformId == 0) {
                        if (result[i].isDefaultLibrary == true) {
                            platformName = "n/a";
                        } else {
                            platformName = "";
                        }
                    } else {
                        platformName = result[i].defaultPlatformName;
                    }

                    let defaultLibrary = '';
                    if (result[i].isDefaultLibrary == true) {
                        defaultLibrary = "Yes";
                    } else {
                        defaultLibrary = "";
                    }

                    let deleteButton = '';
                    if (result[i].isDefaultLibrary == false) {
                        deleteButton = '<a href="#" onclick="showSubDialog(\'librarydelete\', ' + result[i].id + ');" class="romlink"><img src="/images/delete.svg" class="banner_button_image" alt="Delete" title="Delete" /></a>';
                    }

                    newTable.appendChild(createTableRow(
                        false,
                        [
                            result[i].name,
                            result[i].path,
                            platformName,
                            defaultLibrary,
                            '<div style="text-align: right;">' + deleteButton + '</div>'
                        ],
                        'romrow',
                        'romcell'
                    ));
                }
            }
        );
    }

    drawLibrary();

    document.getElementById('settings_newlibrary').addEventListener('click', function () {
        let newLibrary = new NewLibrary();
        newLibrary.open();
    });
</script>